<?xml version="1.0" encoding="utf-8"?>
<diff xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="../../../../../getting_a_job/xsd/mddiff.xsd">
	<replace sel="//cues">
		<cues>
			<cue name="Init" mapeditor="false">
				<actions>
					<do_if value="not $FillStationGroup?">
						<create_group groupname="$FillStationGroup" />
						<set_value name="$PlanetaryWares.{ware.advancedcomposites}" exact="25" />
						<set_value name="$PlanetaryWares.{ware.advancedelectronics}" exact="14" />
						<set_value name="$PlanetaryWares.{ware.antimattercells}" exact="50" />
						<set_value name="$PlanetaryWares.{ware.antimatterconverters}" exact="80" />
						<set_value name="$PlanetaryWares.{ware.claytronics}" exact="22" />
						<set_value name="$PlanetaryWares.{ware.dronecomponents}" exact="16" />
						<set_value name="$PlanetaryWares.{ware.energycells}" exact="525" />
						<set_value name="$PlanetaryWares.{ware.engineparts}" exact="42" />
						<set_value name="$PlanetaryWares.{ware.fieldcoils}" exact="53" />
						<set_value name="$PlanetaryWares.{ware.foodrations}" exact="345" />
						<set_value name="$PlanetaryWares.{ware.graphene}" exact="45" />
						<set_value name="$PlanetaryWares.{ware.hullparts}" exact="59" />
						<set_value name="$PlanetaryWares.{ware.meat}" exact="116" />
						<set_value name="$PlanetaryWares.{ware.medicalsupplies}" exact="125" />
						<set_value name="$PlanetaryWares.{ware.microchips}" exact="22" />
						<set_value name="$PlanetaryWares.{ware.missilecomponents}" exact="57" />
						<set_value name="$PlanetaryWares.{ware.plasmaconductors}" exact="9" />
						<set_value name="$PlanetaryWares.{ware.quantumtubes}" exact="24" />
						<set_value name="$PlanetaryWares.{ware.refinedmetals}" exact="60" />
						<set_value name="$PlanetaryWares.{ware.rhydoniumcell}" exact="1" />
						<set_value name="$PlanetaryWares.{ware.scanningarrays}" exact="11" />
						<set_value name="$PlanetaryWares.{ware.shieldcomponents}" exact="29" />
						<set_value name="$PlanetaryWares.{ware.shipsupplies}" exact="6" />
						<set_value name="$PlanetaryWares.{ware.siliconwafers}" exact="50" />
						<set_value name="$PlanetaryWares.{ware.smartchips}" exact="43" />
						<set_value name="$PlanetaryWares.{ware.spices}" exact="150" />
						<set_value name="$PlanetaryWares.{ware.superfluidcoolant}" exact="55" />
						<set_value name="$PlanetaryWares.{ware.turretcomponents}" exact="14" />
						<set_value name="$PlanetaryWares.{ware.water}" exact="145" />
						<set_value name="$PlanetaryWares.{ware.weaponcomponents}" exact="17" />
						<set_value name="$PlanetaryWares.{ware.wheat}" exact="186" />
					</do_if>
				</actions>
				<cues>
					<cue name="FindFillStations" instantiate="true" checkinterval="53" checktime="player.age + 15s">
						<actions>
							<find_station groupname="$FillStationGroup" append="true" multiple="true" space="player.galaxy" tradestation="true" functional="true">
								<match owner="faction.civilian" />
							</find_station>
						</actions>
					</cue>
					<cue name="ProcessWaresLoop" instantiate="true" checkinterval="61" checktime="player.age + 90s">
						<actions>
							<set_value name="$delayalpha" exact="0s" />
							<do_if value="$FillStationGroup.count gt 0">
								<do_all exact="$FillStationGroup.count" counter="$i">
									<set_value name="$Station" exact="$FillStationGroup.{$i}" />
									<set_value name="$delayalpha" exact="($delayalpha + 1.0)s" />
									<include_actions ref="ProcessWares" />
								</do_all>
							</do_if>
						</actions>
					</cue>
					<library name="ProcessWares">
						<delay exact="$delayalpha" />
						<actions>
							<do_if value="$Station.exists">
								<set_value name="$_SingleLog_1" exact="0" />

								<do_for_each name="$ware" in="$PlanetaryWares">
									<set_value name="$wareNum" exact="$PlanetaryWares.{$ware}" />
									<set_value name="$waresAmount" exact="$Station.cargo.{$ware}.count" />
									<set_value name="$maxWaresAmount" exact="$Station.cargo.{$ware}.target" />
									<set_value name="$addWaresAmount" exact="0" />
									<set_value name="$removeWaresAmount" exact="0" />

									<do_if value="$waresAmount gt $maxWaresAmount">
										<set_value name="$removeWaresAmount" exact="($waresAmount - $maxWaresAmount)i" />
									</do_if>
									<do_if value="$waresAmount lt $maxWaresAmount">
										<set_value name="$addWaresAmount" exact="[$wareNum, $maxWaresAmount-$waresAmount].min" />
									</do_if>
									<do_if value="$addWaresAmount gt 0 or $removeWaresAmount gt 0">
										<do_if value="$_SingleLog_1 == 0">
											<set_value name="$addWaresAmount" exact="$addWaresAmount*120" />
											<!-- single log -->
											<debug_to_file name="$Station.knownname" directory="'SW_planet_aid'" text="' '" output="false" append="true" chance="0" />
											<debug_to_file name="$Station.knownname" directory="'SW_planet_aid'" text="'[%2] -- Processing Wharf/Shipyard Cargo of %1'.[$Station.knownname, player.systemtime.{'%Y-%m-%d %H:%M:%S'}]" output="false" append="true" chance="0" />
											<set_value name="$_SingleLog_1" exact="1" />
										</do_if>
										<do_if value="$addWaresAmount gt 0">
											<debug_to_file name="$Station.knownname" directory="'SW_planet_aid'" text="'Adding %2 units of %1'.[$ware.name, $addWaresAmount]" output="false" append="true" chance="0" />
											<add_cargo object="$Station" ware="$ware" exact="$addWaresAmount" />
										</do_if>
										<!-- <do_if value="$removeWaresAmount gt 0">
										<debug_to_file name="$Station.knownname" directory="'SW_planet_aid'" text="'Removing %2 units of %1'.[$ware.name, $removeWaresAmount]" output="false" append="true" />
										<remove_cargo object="$Station" ware="$ware" exact="$removeWaresAmount" />
									</do_if> -->
									</do_if>
								</do_for_each>
							</do_if>
						</actions>
					</library>

					<!-- <library name="AddShipMod">
					<delay min="1s" max="10s" />
					<actions>
						<set_value name="$Owner" exact="$Station.trueowner" />
						<set_value name="$BaseMods" exact="[ware.mod_shield_capacity_02_mk3, ware.mod_engine_forwardthrust_01_mk3, ware.mod_ship_mass_01_mk3]" />
						<find_ship name="$Ship" multiple="false" space="player.galaxy" validjobship="true" trueowner="$Owner" functional="true">
							<match class="[class.ship_l, class.ship_xl]" />
							<match_any_equipment_mod negate="true" />
						</find_ship>
						<do_if value="$Ship.exists">
							<set_value name="$ShipModDebug" exact="$Owner + '//' + $Ship.knownname + '//' + $Ship.class + '//' + $Ship.typename" />
							<add_equipment_mods object="$Ship">
								<mods list="$BaseMods"/>
							</add_equipment_mods>
							<set_value name="$ShipModDebug" exact="$ShipModDebug + '//' + 'ware.mod_ship_mass_01_mk3' + '//' + 'ware.mod_shield_capacity_02_mk3' + '//' + 'ware.mod_engine_forwardthrust_01_mk3'" />
							<do_if value="($Ship.primarypurpose == purpose.fight) or ($Ship.primarypurpose == purpose.trade) or ($Ship.primarypurpose == purpose.build)">
								<find_object_component name="$TargetWeapon" class="class.weapon" object="$Ship" multiple="false">
									<match class="class.turret" negate="true" />
								</find_object_component>
								<do_if value="$TargetWeapon">
									<add_equipment_mods object="$Ship">
										<weapon ware="ware.mod_weapon_damage_02_mk3" macro="$TargetWeapon.macro" />
									</add_equipment_mods>
									<set_value name="$ShipModDebug" exact="$ShipModDebug + '//' + $TargetWeapon.macro + '=' + 'ware.mod_weapon_damage_02_mk3'" />
									<remove_value name="$TargetWeapon" />
								</do_if>
								<find_object_component name="$TargetTurret" class="class.turret" object="$Ship" multiple="false" />
								<do_if value="$TargetTurret">
									<add_equipment_mods object="$Ship">
										<weapon ware="ware.mod_weapon_damage_02_mk3" macro="$TargetTurret.macro" />
									</add_equipment_mods>
									<set_value name="$ShipModDebug" exact="$ShipModDebug + '//' + $TargetTurret.macro + '=' + 'ware.mod_weapon_damage_02_mk3'" />
									<remove_value name="$TargetTurret" />
								</do_if>
							</do_if>
							<do_if value="$Ship.primarypurpose == purpose.mine">
								<find_object_component name="$TargetWeapon" class="class.weapon" object="$Ship" multiple="false">
									<match class="class.turret" negate="true" />
								</find_object_component>
								<do_if value="$TargetWeapon">
									<add_equipment_mods object="$Ship">
										<weapon ware="ware.mod_weapon_mining_01_mk3" macro="$TargetWeapon.macro" />
									</add_equipment_mods>
									<set_value name="$ShipModDebug" exact="$ShipModDebug + '//' + $TargetWeapon.macro + '=' + 'ware.mod_weapon_mining_01_mk3'" />
									<remove_value name="$TargetWeapon" />
								</do_if>
								<find_object_component name="$TargetTurret" class="class.turret" object="$Ship" multiple="false">
									<match macro="[macro.turret_arg_l_mining_01_mk1_macro, macro.turret_arg_m_mining_01_mk1_macro, macro.turret_arg_m_mining_02_mk1_macro, macro.turret_par_l_mining_01_mk1_macro, macro.turret_par_m_mining_01_mk1_macro, macro.turret_par_m_mining_02_mk1_macro, macro.turret_tel_l_mining_01_mk1_macro, macro.turret_tel_m_mining_01_mk1_macro, macro.turret_tel_m_mining_02_mk1_macro]" />
								</find_object_component>
								<do_if value="$TargetTurret">
									<add_equipment_mods object="$Ship">
										<weapon ware="ware.mod_weapon_mining_01_mk3" macro="$TargetTurret.macro" />
									</add_equipment_mods>
									<set_value name="$ShipModDebug" exact="$ShipModDebug + '//' + $TargetTurret.macro + '=' + 'ware.mod_weapon_mining_01_mk3'" />
									<remove_value name="$TargetTurret" />
								</do_if>
							</do_if>
							
							<debug_to_file name="'Added Ship Mods'" directory="'SW_planet_aid'" text="'%1'.[$ShipModDebug]" output="false" append="true" />
						</do_if>
						
						<remove_value name="$Owner" />
						<remove_value name="$Ship" />
					</actions>
				</library> -->
				</cues>
			</cue>
		</cues>
	</replace>
</diff>